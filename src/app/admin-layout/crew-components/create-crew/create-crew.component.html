<div class="main-content">
    <div class="card">
        <!-- <div class="card-header card-header-danger">
            <h4 class="card-title"> CREW</h4>
        </div> -->
        <div  class="card-body">
            <form *ngIf="createCrewForm" [formGroup]="createCrewForm" (ngSubmit)="save()" >
                <div class="row">
                    <div class="col-4">
                        <mat-form-field>
                            <input matInput formControlName="crewname" placeholder="Crew name" name="crewname" type="text">
                        </mat-form-field>
                        <!-- <ul class="text-danger list-unstyled"
                            *ngIf="(createCrewForm.controls.crewname.dirty) && createCrewForm.controls.crewname.invalid">
                            <li *ngFor="let error of createCrewForm.controls.crewname.getValidationMessages()">
                                {{error}}
                            </li>
                        </ul> -->
                    </div>
                    <div class="col-4">
                        <mat-form-field>
                            <textarea matInput formControlName="crewdescription" placeholder="Enter Description"
                            name="crewdescription"></textarea>
                        </mat-form-field>
                        <!-- <ul class="text-danger list-unstyled"
                            *ngIf="(createCrewForm.controls.crewdescription.dirty) && createCrewForm.controls.crew.description.invalid">
                            <li *ngFor="let error of createCrewForm.controls.crew.description.getValidationMessages()">
                                {{error}}
                            </li>
                        </ul> -->
                    </div>
                    <div class="hr">
                        <span>labour</span>
                    </div>

                    <!-- <div  *ngIf="laboursData  && laboursData.length > 0">

                        <p *ngFor="let n of laboursData" formArrayName="labour">
                            <mat-checkbox class="checkbox-margin" (change)="updateChkbxArray(n, $event.checked, 'labour')" value="n._id">
                                {{n.name}}</mat-checkbox>
                            </p>
                        </div>
                    -->
                    <mat-form-field>
                        <mat-chip-list #chipLabourList>
                            <mat-chip *ngFor="let labour of chipSelectedLabour" [selectable]=true [removable]=true
                                (removed)="removeLabour(labour)">
                                {{labour.name}}
                                <mat-icon matChipRemove>X</mat-icon>
                            </mat-chip>
                            <input placeholder="Your labour" #LabourInput formControlName="labour" [matAutocomplete]="Lauto"
                                [matChipInputFor]="chipLabourList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                [matChipInputAddOnBlur]=true (matChipInputTokenEnd)="addLabour($event)">
                        </mat-chip-list>
                        <mat-autocomplete #Lauto="matAutocomplete" (optionSelected)="labourSelected($event)">
                            <mat-option *ngFor="let thisLabourName of filteredLabour | async" [value]="thisLabourName">
                                {{thisLabourName}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>

                <div class="hr">
                    <span>equipment</span>
                </div>
                <mat-form-field>
                    <mat-chip-list #chipEquipmentList>
                        <mat-chip *ngFor="let equipment of chipSelectedEquipment" [selectable]=true [removable]=true
                            (removed)="removeEquipment(equipment)">
                            {{equipment.name}}
                            <mat-icon matChipRemove>X</mat-icon>
                        </mat-chip>
                        <input placeholder="Your equipment" #EquipmentInput formControlName="equipment" [matAutocomplete]="Eauto"
                            [matChipInputFor]="chipEquipmentList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                            [matChipInputAddOnBlur]=true (matChipInputTokenEnd)="addEquipment($event)">
                    </mat-chip-list>
                    <mat-autocomplete #Eauto="matAutocomplete" (optionSelected)="equipmentSelected($event)">
                        <mat-option *ngFor="let thisequipmentName of filteredEquipment | async" [value]="thisequipmentName">
                            {{thisequipmentName}}
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field>
                <!-- <div *ngIf="equipmentsData  && equipmentsData.length > 0">
            
                <p *ngFor="let n of equipmentsData" formArrayName="equipment">
                    <mat-checkbox class="checkbox-margin" (change)="updateChkbxArray(n, $event.checked, 'equipment')"
                        value="n._id">
                        {{n.name}}</mat-checkbox>
                </p>
            </div> -->
                </div> 

                <button mat-raised-button type="submit" [disabled]="createCrewForm.invalid"
                    class="btn btn-danger pull-right">
                    Save
                </button>
                <button mat-raised-button type="button" class="btn btn-danger pull-right" (click)="cancel()">Cancel
                </button>
            </form>
        </div>
    </div>